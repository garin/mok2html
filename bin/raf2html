#!/usr/bin/env ruby
# -*- coding: utf-8 -*-
# Copyright (C) garin <garin54@gmail.com> 2011-2013
# See the included file COPYING for details.
$:.unshift File.join(File.dirname(__FILE__), "../lib")
require "optparse"
require "raf2html"

def usage(opt)
  puts opt.help
  exit 0
end

options = {:css => nil, :language => 'ja', :index => true, :quiet => false}
opt = OptionParser.new do |opt|
  opt.banner = "Usage: raf2html [options] file"
  opt.version = Raf::Raf2Html::VERSION
  opt.release = Raf::Raf2Html::RELEASE
  opt.on("--css file", "スタイルシートのファイルを指定") {|f| options[:css] = f}
  opt.on("-L", "--language LANG", "言語(デフォルトは #{options[:language]} 。ドキュメント側で指定されていればそちらを優先)"){|l| options[:language] = l}
  opt.on("--[no-]index", "目次を生成する(デフォルトは生成する)"){|v| options[:index] = v }
  opt.on("--[no-]metadata", "メタ情報を出力しない(デフォルトは出力する)"){|v| options[:metadata] = v }
  opt.on("-q","--quiet", "本文だけを出力する(ヘッダやフッタは出力しない)"){ options[:quiet] = true }
end
opt.parse!(ARGV)
usage(opt) unless ARGV[0]
src = File.open(ARGV[0],"r").readlines
raf = Raf::Raf2Html.new(src, options)
puts raf.to_html
